import{API_KEY}from"../../config.js";document.addEventListener("DOMContentLoaded",(function(){const e=["select","arts","automobiles","books","business","fashion","food","health","home","insider","magazine","movies","nyregion","obituaries","opinion","politics","realestate","science","sports","sundayreview","technology","theater","t - magazine","travel","upshot","us","world"],t=document.getElementById("section-selector"),o=document.querySelector(".card-section"),n=document.querySelector(".logo"),s=document.querySelector(".loader"),a=document.querySelector(".error-message");function r(e,t,o,n){const s=c("div");s.setAttribute("class","card"),s.style.backgroundImage=`url(${t})`,s.style.backgroundPosition="center",s.style.backgroundSize="cover";const a=c("a");a.setAttribute("href",n),a.setAttribute("class","card-link"),a.setAttribute("target","_blank");const r=c("p");r.setAttribute("class","abstract"),r.innerText=o,s.appendChild(r),s.appendChild(a),e.appendChild(s)}function c(e){return document.createElement(e)}e.forEach(e=>{const o=document.createElement("option");var n;o.innerText=(n=e).charAt(0).toUpperCase()+n.slice(1),o.value=e,t.appendChild(o)}),t.addEventListener("change",e=>{var t;o.innerHTML="",n.classList.remove("logo-with-content"),n.classList.add("logo"),t=e.target.value,s.classList.remove("none"),a.classList.add("none"),fetch(`https://api.nytimes.com/svc/topstories/v2/${t}.json?api-key=${API_KEY}`).then(e=>e.json()).then(e=>{!function(e){e.forEach(t=>{null===t.multimedia&&e.splice(e.indexOf(t),1)})}(e=e.results);for(let t=0;t<12;t++)r(o,e[t].multimedia[0].url,e[t].abstract,e[t].url);n.classList.add("logo-with-content"),n.classList.remove("logo"),s.classList.add("none")}).catch(e=>{console.log(e),s.classList.add("none"),""===o.innerHTML&&a.classList.remove("none")})})}),!1);