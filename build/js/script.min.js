import{API_KEY}from"../../config.js";document.addEventListener("DOMContentLoaded",(function(){const e=["select","arts","automobiles","books","business","fashion","food","health","home","insider","magazine","movies","nyregion","obituaries","opinion","politics","realestate","science","sports","sundayreview","technology","theater","t - magazine","travel","upshot","us","world"],t=document.getElementById("section-selector"),n=document.querySelector(".card-section"),o=document.querySelector(".logo"),s=document.querySelector(".loader"),a=document.querySelector(".error-message"),r=()=>""!==n.innerHTML;function c(e,t,n,o){const s=i("div");s.setAttribute("class","card"),s.style.backgroundImage=`url(${t})`,s.style.backgroundPosition="center",s.style.backgroundSize="cover";const a=i("a");a.setAttribute("href",o),a.setAttribute("class","card-link"),a.setAttribute("target","_blank");const r=i("p");r.setAttribute("class","abstract"),r.innerText=n,s.appendChild(r),s.appendChild(a),e.appendChild(s)}function i(e){return document.createElement(e)}e.forEach(e=>{const n=document.createElement("option");var o;n.innerText=(o=e).charAt(0).toUpperCase()+o.slice(1),n.value=e,t.appendChild(n)}),t.addEventListener("change",e=>{var t;n.innerHTML="",o.classList.remove("logo-with-content"),o.classList.add("logo"),t=e.target.value,s.classList.remove("none"),a.classList.add("none"),fetch(`https://api.nytimes.com/svc/topstories/v2/${t}.json?api-key=${API_KEY}`).then(e=>e.json()).then(e=>{const t=e.results;!function(e){e.forEach(t=>{null===t.multimedia&&e.splice(e.indexOf(t),1)})}(t);for(let e=0;e<12;e++)c(n,t[e].multimedia[0].url,t[e].abstract,t[e].url)}).then(()=>{o.classList.add("logo-with-content"),o.classList.remove("logo"),s.classList.add("none")}).catch(()=>{s.classList.add("none"),r&&a.classList.remove("none")})})}),!1);